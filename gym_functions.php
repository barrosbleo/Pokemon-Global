<?php
//include('modules/lib.php');
//require_once 'config.php';

$gymSuperArray = array(
	'Indigo Gymleaders' => array(
		'Brock' => array(
			'pokemon' => array(
				array(
					'name' => 'Geodude',
					'level' => 5
				),
				array(
					'name' => 'Onix',
					'level' => 14
				)
			),
			'badge' => 'Boulder',
			'nLegend' => true
		),
		'Misty' => array(
			'pokemon' => array(
				array(
					'name' => 'Staryu',
					'level' => 18
				),
				array(
					'name' => 'Starmie',
					'level' => 21
				)
			),
			'badge' => 'Cascade',
			'nLegend' => true
		),
		'Lt. Surge' => array(
			'pokemon' => array(
				array(
					'name' => 'Voltorb',
					'level' => 21
				),
				array(
					'name' => 'Pikachu',
					'level' => 18
				),
				array(
					'name' => 'Raichu',
					'level' => 24
				)
			),
			'badge' => 'Thunder',
			'nLegend' => true
		),
		'Erika' => array(
			'pokemon' => array(
				array(
					'name' => 'Victreebel',
					'level' => 29
				),
				array(
					'name' => 'Tangela',
					'level' => 24
				),
				array(
					'name' => 'Vileplume',
					'level' => 29
				)
			),
			'badge' => 'Rainbow',
			'nLegend' => true
		),
		'Sabrina' => array(
			'pokemon' => array(
				array(
					'name' => 'Kadabra',
					'level' => 38
				),
				array(
					'name' => 'Mr. Mime',
					'level' => 37
				),
				array(
					'name' => 'Venomoth',
					'level' => 38
				),
				array(
					'name' => 'Alakazam',
					'level' => 43
				)
			),
			'badge' => 'Marsh',
			'nLegend' => true
		),
		'Koga' => array(
			'pokemon' => array(
				array(
					'name' => 'Koffing',
					'level' => 37
				),
				array(
					'name' => 'Muk',
					'level' => 39
				),
				array(
					'name' => 'Weezing',
					'level' => 43
				)
			),
			'badge' => 'Soul',
			'nLegend' => true
		),
		'Blaine' => array(
			'pokemon' => array(
				array(
					'name' => 'Growlithe',
					'level' => 42
				),
				array(
					'name' => 'Ponyta',
					'level' => 40
				),
				array(
					'name' => 'Rapidash',
					'level' => 42
				),
				array(
					'name' => 'Arcanine',
					'level' => 47
				)
			),
			'badge' => 'Volcano',
			'nLegend' => true
		),
		'Giovanni' => array(
			'pokemon' => array(
				array(
					'name' => 'Rhyhorn',
					'level' => 45
				),
				array(
					'name' => 'Dugtrio',
					'level' => 42
				),
				array(
					'name' => 'Nidoqueen',
					'level' => 44
				),
				array(
					'name' => 'Nidoking',
					'level' => 45
				),
				array(
					'name' => 'Rhydon',
					'level' => 50
				)
			),
			'badge' => 'Earth',
			'nLegend' => true
		),
	),
	'Johto Gymleaders' => array(
		'Falkner' => array(
			'pokemon' => array(
				array(
					'name' => 'Pidgey',
					'level' => 9
				),
				array(
					'name' => 'Pidgeotto',
					'level' => 13
				)
			),
			'badge' => 'Zephyr',
			'nLegend' => true
		),
		'Bugsy' => array(
			'pokemon' => array(
				array(
					'name' => 'Metapod',
					'level' => 15
				),
				array(
					'name' => 'Kakuna',
					'level' => 15
				),
				array(
					'name' => 'Scyther',
					'level' => 17
				)
			),
			'badge' => 'Hive',
			'nLegend' => true
		),
		'Whitney' => array(
			'pokemon' => array(
				array(
					'name' => 'Clefairy',
					'level' => 17
				),
				array(
					'name' => 'Miltank',
					'level' => 19
				)
			),
			'badge' => 'Plain',
			'nLegend' => true
		),
		'Morty' => array(
			'pokemon' => array(
				array(
					'name' => 'Gastly',
					'level' => 21
				),
				array(
					'name' => 'Haunter',
					'level' => 23
				),
				array(
					'name' => 'Gengar',
					'level' => 25
				)
			),
			'badge' => 'Fog',
			'nLegend' => true
		),
		'Chuck' => array(
			'pokemon' => array(
				array(
					'name' => 'Primeape',
					'level' => 29
				),
				array(
					'name' => 'Poliwrath',
					'level' => 31
				)
			),
			'badge' => 'Storm',
			'nLegend' => true
		),
		'Jasmine' => array(
			'pokemon' => array(
				array(
					'name' => 'Magnemite',
					'level' => 30
				),
				array(
					'name' => 'Steelix',
					'level' => 35
				)
			),
			'badge' => 'Mineral',
			'nLegend' => true
		),
		'Pryce' => array(
			'pokemon' => array(
				array(
					'name' => 'Seel',
					'level' => 30
				),
				array(
					'name' => 'Dewgong',
					'level' => 32
				),
				array(
					'name' => 'Piloswine',
					'level' => 34
				)
			),
			'badge' => 'Glacier',
			'nLegend' => true
		),
		'Clair' => array(
			'pokemon' => array(
				array(
					'name' => 'Dragonair',
					'level' => 38
				),
				array(
					'name' => 'Gyarados',
					'level' => 38
				),
				array(
					'name' => 'Kingdra',
					'level' => 41
				)
			),
			'badge' => 'Rising',
			'nLegend' => true
		),
	),
	'Hoenn Gymleaders' => array(
		'Roxanne' => array(
			'pokemon' => array(
				array(
					'name' => 'Geodude',
					'level' => 14
				),
				array(
					'name' => 'Nosepass',
					'level' => 15
				)
			),
			'badge' => 'Stone',
			'nLegend' => true
		),
		'Brawly' => array(
			'pokemon' => array(
				array(
					'name' => 'Machop',
					'level' => 17
				),
				array(
					'name' => 'Makuhita',
					'level' => 18
				)
			),
			'badge' => 'Knuckle',
			'nLegend' => true
		),
		'Wattson' => array(
			'pokemon' => array(
				array(
					'name' => 'Magnemite',
					'level' => 22
				),
				array(
					'name' => 'Voltorb',
					'level' => 20
				),
				array(
					'name' => 'Magneton',
					'level' => 23
				)
			),
			'badge' => 'Dynamo',
			'nLegend' => true
		),
		'Flannery' => array(
			'pokemon' => array(
				array(
					'name' => 'Slugma',
					'level' => 26
				),
				array(
					'name' => 'Torkoal',
					'level' => 28
				)
			),
			'badge' => 'Heat',
			'nLegend' => true
		),
		'Norman' => array(
			'pokemon' => array(
				array(
					'name' => 'Slaking',
					'level' => 31
				),
				array(
					'name' => 'Vigoroth',
					'level' => 30
				)
			),
			'badge' => 'Balance',
			'nLegend' => true
		),
		'Winona' => array(
			'pokemon' => array(
				array(
					'name' => 'Swellow',
					'level' => 31
				),
				array(
					'name' => 'Pelipper',
					'level' => 30
				),
				array(
					'name' => 'Skarmory',
					'level' => 32
				),
				array(
					'name' => 'Altaria',
					'level' => 33
				)
			),
			'badge' => 'Feather',
			'nLegend' => true
		),
		'Tate' => array(
			'pokemon' => array(
				array(
					'name' => 'Solrock',
					'level' => 42
				),
				array(
					'name' => 'Lunatone',
					'level' => 32
				)
			),
			'badge' => 'Mind',
			'nLegend' => true
		),
		'Wallace' => array(
			'pokemon' => array(
				array(
					'name' => 'Luvdisc',
					'level' => 40
				),
				array(
					'name' => 'Sealeo',
					'level' => 40
				),
				array(
					'name' => 'Seaking',
					'level' => 42
				),
				array(
					'name' => 'Whiscash',
					'level' => 42
				),
				array(
					'name' => 'Milotic',
					'level' => 43
				)
			),
			'badge' => 'Rain',
			'nLegend' => true
		),
	),
	'Sinnoh Gymleaders' => array(
		'Roark' => array(
			'pokemon' => array(
				array(
					'name' => 'Geodude',
					'level' => 12
				),
				array(
					'name' => 'Onix',
					'level' => 12
				),
				array(
					'name' => 'Cranidos',
					'level' => 14
				)
			),
			'badge' => 'Coal',
			'nLegend' => true
		),
		'Gardenia' => array(
			'pokemon' => array(
				array(
					'name' => 'Cherubi',
					'level' => 19
				),
				array(
					'name' => 'Turtwig',
					'level' => 19
				),
				array(
					'name' => 'Roserade',
					'level' => 22
				)
			),
			'badge' => 'Forest',
			'nLegend' => true
		),
		'Maylene' => array(
			'pokemon' => array(
				array(
					'name' => 'Meditite',
					'level' => 27
				),
				array(
					'name' => 'Machoke',
					'level' => 27
				),
				array(
					'name' => 'Lucario',
					'level' => 30
				)
			),
			'badge' => 'Cobble',
			'nLegend' => true
		),
		'Crasher Wake' => array(
			'pokemon' => array(
				array(
					'name' => 'Gyarados',
					'level' => 27
				),
				array(
					'name' => 'Quagsire',
					'level' => 27
				),
				array(
					'name' => 'Floatzel',
					'level' => 30
				)
			),
			'badge' => 'Fen',
			'nLegend' => true
		),
		'Fantina' => array(
			'pokemon' => array(
				array(
					'name' => 'Drifblim',
					'level' => 32
				),
				array(
					'name' => 'Gengar',
					'level' => 34
				),
				array(
					'name' => 'Mismagius',
					'level' => 36
				)
			),
			'badge' => 'Relic',
			'nLegend' => true
		),
		'Byron' => array(
			'pokemon' => array(
				array(
					'name' => 'Bronzor',
					'level' => 36
				),
				array(
					'name' => 'Steelix',
					'level' => 36
				),
				array(
					'name' => 'Bastiodon',
					'level' => 39
				)
			),
			'badge' => 'Mine',
			'nLegend' => true
		),
		'Candice' => array(
			'pokemon' => array(
				array(
					'name' => 'Snover',
					'level' => 38
				),
				array(
					'name' => 'Sneasel',
					'level' => 38
				),
				array(
					'name' => 'Medicham',
					'level' => 40
				),
				array(
					'name' => 'Abomasnow',
					'level' => 42
				)
			),
			'badge' => 'Icicle',
			'nLegend' => true
		),
		'Volkner' => array(
			'pokemon' => array(
				array(
					'name' => 'Raichu',
					'level' => 46
				),
				array(
					'name' => 'Octillery',
					'level' => 47
				),
				array(
					'name' => 'Ambipom',
					'level' => 47
				),
				array(
					'name' => 'Luxray',
					'level' => 49
				)
			),
			'badge' => 'Beacon',
			'nLegend' => true
		),
	),
	'Champions League' => array(
		'Gary' => array(
			'pokemon' => array(
				array(
					'name' => 'Pidgeot',
					'level' => 100
				),
				array(
					'name' => 'Alakazam',
					'level' => 100
				),
				array(
					'name' => 'Rhydon',
					'level' => 100
				),
				array(
					'name' => 'Gyarados',
					'level' => 100
				),
				array(
					'name' => 'Arcanine',
					'level' => 100
				),
				array(
					'name' => 'Venusaur',
					'level' => 100
				)
			),
			'badge' => 'Coral',
			'nLegend' => true
		),
		'Lance' => array(
			'pokemon' => array(
				array(
					'name' => 'Gyarados',
					'level' => 100
				),
				array(
					'name' => 'Dragonite',
					'level' => 100
				),
				array(
					'name' => 'Aerodactyl',
					'level' => 100
				),
				array(
					'name' => 'Dragonite',
					'level' => 100
				),
				array(
					'name' => 'Charizard',
					'level' => 100
				),
				array(
					'name' => 'Dragonite',
					'level' => 100
				)
			),
			'badge' => 'Spike',
			'nLegend' => true
		),
		'Steven' => array(
			'pokemon' => array(
				array(
					'name' => 'Skarmory',
					'level' => 100
				),
				array(
					'name' => 'Claydol',
					'level' => 100
				),
				array(
					'name' => 'Cradily',
					'level' => 100
				),
				array(
					'name' => 'Armaldo',
					'level' => 100
				),
				array(
					'name' => 'Aggron',
					'level' => 100
				),
				array(
					'name' => 'Metagross',
					'level' => 100
				)
			),
			'badge' => 'Jade',
			'nLegend' => true
		),
		'Cynthia' => array(
			'pokemon' => array(
				array(
					'name' => 'Spiritomb',
					'level' => 100
				),
				array(
					'name' => 'Roserade',
					'level' => 100
				),
				array(
					'name' => 'Milotic',
					'level' => 100
				),
				array(
					'name' => 'Lucario',
					'level' => 100
				),
				array(
					'name' => 'Togekiss',
					'level' => 100
				),
				array(
					'name' => 'Garchomp',
					'level' => 100
				)
			),
			'badge' => 'Ruby',
			'nLegend' => true
		),
	),
);



// for gym.php
function getAllLeaguesLeadersAndBadges() {
	global $gymSuperArray;
	$theArray = array();
	
	foreach ($gymSuperArray as $leagueName => $leagueTrainers) {
		foreach ($leagueTrainers as $leaderName => $leaderArray) {
			$theArray[$leagueName][] = array('name' => $leaderName, 'badge' => $leaderArray['badge']);
		}
	}
	return $theArray;
}
// print_r(getAllLeaguesLeadersAndBadges());

// also for gym.php
function getLeadersPokemonAndBadge($name) {
	global $gymSuperArray;
	
	foreach ($gymSuperArray as $leagueName => $leagueTrainers) {
		foreach ($leagueTrainers as $leaderName => $leaderArray) {
			if ($leaderName == $name) {
				return array('pokemon' => $leaderArray['pokemon'], 'badge' => $leaderArray['badge']);
			}
		}
	}
	return false;
}
// print_r(getLeadersPokemonAndBadge('Giovanni'));



// for map.php
function canCatchLegends($uid, $conn) {
	global $gymSuperArray;
	
	$badgesNeeded = array();
	foreach ($gymSuperArray as $leagueName => $leagueTrainers) {
		foreach ($leagueTrainers as $leaderName => $leaderArray) {
			if ($leaderArray['nLegend'] === true) {
				$badgesNeeded[] = $leaderArray['badge'];
			}
		}
	}
	
	$uid = (int) $uid;
	$userBadges = array();
	$query = "SELECT `badge` FROM `user_badges` WHERE `uid`='{$uid}'";
	$result = $conn->query($query);
	while ($row = $result->fetch_assoc()) { $userBadges[] = $row['badge']; }

	foreach ($badgesNeeded as $badge) {
		if (!in_array($badge, $userBadges)) {
			return false;
		}
	}

	return true;
}

// var_dump(canCatchLegends(1));
?>
